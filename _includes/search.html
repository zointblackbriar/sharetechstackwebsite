{% if site.post_search %}
<div id="beautifuljekyll-search-overlay">
  <div id="nav-search-exit" title="Exit search">âœ•</div>
  <input type="text" id="nav-search-input" placeholder="Search">
  <ul id="search-results-container"></ul>
  
  <!-- Load script asynchronously with a specific version -->
  <script async src="https://unpkg.com/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      function initSearch() {
        if (typeof SimpleJekyllSearch === 'undefined') {
          setTimeout(initSearch, 100); // Poll until script loads
          return;
        }
        SimpleJekyllSearch({
          searchInput: document.getElementById('nav-search-input'),
          resultsContainer: document.getElementById('search-results-container'),
          json: '{{ site.baseurl }}/assets/data/searchcorpus.json',
          searchResultTemplate: '<li><a href="{url}">{title}</a></li>',
          noResultsText: 'No results found',
          limit: 10, // Limit results for faster rendering
          fuzzy: false // Disable fuzzy search for speed
        });
      }
      initSearch();
    });
  </script>
</div>
{% endif %}